{% extends layout %}

{% load orders_extra %}


{% block content %}


<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>



<div class="card table-responsive p-5 col-lg-8 m-2">
    <button class="btn btn-danger me-5 mb-5">
       Order in Review <span class="badge badge-circle badge-primary ms-2">{{low_stock}}</span>
   </button>
    
    <table class="table text-center">
       <thead>
          <tr class="fw-bold fs-6 text-gray-800">
             <th>#</th>
             <th>Invoice</th>
             <th>Discount</th>
             <th>Advance</th>
             <th>By</th>
             <th>Date</th>

             <th>Actions</th>
          </tr>
       </thead>
       <tbody>

          {% for p in order_in_review %}
          <tr>
             <td><a href="" class="btn">{{forloop.counter}}</a></td>
             <td><div class="mt-4">{{p.invoice_number}}</div></td>
             <td><div class="mt-4">{{p.discount}}</div></td>
             <td><div class="mt-4">{{p.advance}}</div></td>
             <td><div class="mt-4">{{p.employee}}</div></td>
             <td><div class="mt-4">{{p.created_at}}</div></td>


             <td><a href="{% url 'approve_order' p.id %}" class="btn btn-primary"><i
                      class="bi bi-toggle2-off fs-4 me-2"></i> Check</a></td>
             <td><a href=""></a></td>
          </tr>
          {% endfor %}
       </tbody>
    </table>
 </div>

 <div class="row mt-5">

    <div class="col-lg-6">
        <canvas id="myChart"></canvas>
    </div>

    <div class="col-lg-6">
        <canvas id="myChart2"></canvas>
    </div>



</div>
<script>
    {% comment %} const labels = [
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
    ]; {% endcomment %}

    const labels = [
    {% for obj in data1 %}
    '{{obj}}',
    {% endfor %}
    ]

    const data = {
        labels: labels,
        datasets: [{
            label: 'RetailBD',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [20, 20, 20, 25, 222, 20],
        },{
        
            label: 'Mahir',
            backgroundColor: 'rgb(76, 74, 135)',
            borderColor: 'rgb(76, 74, 135)',
            data: [20, 20, 20, 25, 152, 20],
        },{
        
            label: 'EyecareBD',
            backgroundColor: 'rgb(76, 74, 135)',
            borderColor: 'rgb(76, 74, 135)',
            data: [20, 20, 20, 25, 100, 20],
        }
        ]
    };

    const labels2 = {{hour_list}}
    
    {% comment %} [
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
    ];  {% endcomment %}
    const data2 = {
        labels: labels2,
        datasets: [
        
        {% for label in label_list %}
        {
            label: '{% label_formatter label_list forloop.counter %}',
            // backgroundColor: 'rgb(255, 99, 132)',
            backgroundColor: '{% cycle "lightgreen" "purple" "darkgreen" "lightblue" "darkblue" "yellow"%}',
            borderColor: '{% cycle "lightgreen" "purple" "darkgreen" "lightblue" "darkblue" "yellow" %}',
            //data: {{total_point_list.0}},
            data: {% data_formatter total_point_list forloop.counter %},
        },
        {% endfor %}
        ]
    };

    const config = {
        type: 'line',
        data: data,
        options: {}
    };

    const config2 = {
        type: 'line',
        data: data2,
        options: {}
    };

    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );

    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config2
    );
</script>
{% endblock %}